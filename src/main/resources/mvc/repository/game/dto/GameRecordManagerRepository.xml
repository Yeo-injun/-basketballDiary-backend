<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.threeNerds.basketballDiary.mvc.game.repository.dto.GameRecordManagerRepository">

    <select id="findGamesByTeamSeq" resultType="com.threeNerds.basketballDiary.mvc.myTeam.dto.GameRecordDTO">
        /* GameRecordManagerRepository.findGamesByTeamSeq */
        SELECT GAME_SEQ
             , GAME_RECORD_STATE_CODE
             , GAME_TYPE_CODE
             , GAME_YMD
             , GAME_START_TIME
             , GAME_END_TIME
             , GAME_PLACE_ADDRESS
             , GAME_PLACE_NAME
          FROM GAME
         WHERE 1=1
           AND GAME_SEQ IN ( SELECT GAME_SEQ
                               FROM GAME_JOIN_TEAM
                              WHERE TEAM_SEQ = #{teamSeq} )
        <if test="gameBgngYmd != null and gameBgngYmd != ''">
           AND GAME_BGNG_YMD &gt;= #{gameBgngYmd}
        </if>
        <if test="gameEndYmd != null and gameEndYmd != ''">
            AND GAME_END_YMD &lt;= #{gameEndYmd}
        </if>
        <if test="sidoCode != null and sidoCode != ''">
            AND SIDO_CODE = #{sidoCode}
        </if>
        <if test="gamePlaceName != null and gamePlaceName != ''">
            AND INSTR(GAME_PLACE_NAME, #{gamePlaceName}) > 0
        </if>
        <if test="gameTypeCode != null and gameTypeCode != ''">
            AND GAME_TYPE_CODE = #{gameTypeCode}
        </if>
    </select>

    <select id="findGameJoinTeamRecordsByGameSeq" resultType="com.threeNerds.basketballDiary.mvc.myTeam.dto.GameJoinTeamRecordDTO">
        /* GameRecordManagerRepository.findGameJoinTeamRecordsByGameSeq */
        SELECT gjt.GAME_JOIN_TEAM_SEQ
             , g.GAME_SEQ
             , gjt.TEAM_SEQ
             , gjt.TEAM_NAME
             , gjt.HOME_AWAY_CODE
          FROM GAME g
         INNER JOIN GAME_JOIN_TEAM gjt
            ON g.GAME_SEQ = gjt.GAME_SEQ
         WHERE 1=1
           AND g.GAME_SEQ = #{gameSeq}
    </select>

    <select id="findJoinTeamQuarterRecords" resultType="com.threeNerds.basketballDiary.mvc.myTeam.dto.QuarterRecordDTO">
        /* GameRecordManagerRepository.findJoinTeamQuarterRecords */
        SELECT GAME_SEQ
             , GAME_RECORD_STATE_CODE
             , GAME_TYPE_CODE
             , GAME_YMD
             , GAME_START_TIME
             , GAME_END_TIME
             , GAME_PLACE_ADDRESS
             , GAME_PLACE_NAME
         FROM GAME
        WHERE 1=1
          AND GAME_SEQ IN ( SELECT GAME_SEQ
                              FROM GAME_JOIN_TEAM
                             WHERE TEAM_SEQ = #{teamSeq} )
    </select>

</mapper>
